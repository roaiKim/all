{"version":3,"file":"app.js","sourceRoot":"","sources":["../core/app.ts"],"names":[],"mappings":";AAAA,OAAO,EAAwB,iBAAiB,EAAW,MAAM,SAAS,CAAC;AAC3E,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,WAAW,EAAwB,MAAM,OAAO,CAAC;AACpF,OAAO,EAAE,gBAAgB,EAAE,MAAM,wBAAwB,CAAC;AAE1D,OAAO,EAAE,uBAAuB,EAAE,cAAc,EAAE,WAAW,EAAS,MAAM,WAAW,CAAC;AAWxF,MAAM,CAAC,IAAM,GAAG,GAAG,SAAS,EAAE,CAAC;AAE/B,SAAS,mBAAmB,CAAC,QAAuB;IAChD,IAAI,gBAAgB,GAAG,OAAO,CAAC;IAC/B,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,EAAE;QACxC,IAAM,SAAS,GAAG,MAAM,CAAC,oCAAoC,CAAC;QAC9D,IAAI,SAAS,EAAE;YACX,gBAAgB,GAAG,SAAS,CAAC;gBACzB,gGAAgG;gBAChG,eAAe,EAAE,CAAC,cAAc,CAAC;aACpC,CAAC,CAAC;SACN;KACJ;IACD,OAAO,gBAAgB,CAAC,QAAQ,CAAC,CAAC;AACtC,CAAC;AAED,SAAS,SAAS;IACd,IAAM,cAAc,GAAG,iBAAiB,EAAE,CAAC;IAE3C,IAAM,KAAK,GAAiB,WAAW,CACnC,WAAW,CAAC,cAAc,CAAC,EAC3B,mBAAmB,CAAC,eAAe,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE,uBAAuB,CAAC,CAAC,CAClG,CAAC;IAEF,OAAO;QACH,cAAc,gBAAA;QACd,KAAK,OAAA;QACL,cAAc,EAAE,EAAE;QACjB,YAAY;;aAAK;KACrB,CAAC;AACN,CAAC","sourcesContent":["import { createBrowserHistory, createHashHistory, History } from \"history\";\r\nimport { applyMiddleware, compose, createStore, Store, StoreEnhancer } from \"redux\";\r\nimport { routerMiddleware } from \"connected-react-router\";\r\nimport { ActionHandler, ErrorHandler } from \"./module\";\r\nimport { executeMethodMiddleware, LOADING_ACTION, rootReducer, State } from \"./reducer\";\r\n\r\ndeclare const window: any;\r\n\r\ninterface App {\r\n    readonly browserHistory: History;\r\n    readonly store: Store<State>;\r\n    readonly actionHandlers: { [actionType: string]: ActionHandler };\r\n    errorHandler: ErrorHandler;\r\n}\r\n\r\nexport const app = createApp();\r\n\r\nfunction composeWithDevTools(enhancer: StoreEnhancer): StoreEnhancer {\r\n    let composeEnhancers = compose;\r\n    if (process.env.NODE_ENV === \"development\") {\r\n        const extension = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\r\n        if (extension) {\r\n            composeEnhancers = extension({\r\n                // Ref: https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md\r\n                actionsDenylist: [LOADING_ACTION],\r\n            });\r\n        }\r\n    }\r\n    return composeEnhancers(enhancer);\r\n}\r\n\r\nfunction createApp(): App {\r\n    const browserHistory = createHashHistory();\r\n\r\n    const store: Store<State> = createStore(\r\n        rootReducer(browserHistory),\r\n        composeWithDevTools(applyMiddleware(routerMiddleware(browserHistory), executeMethodMiddleware))\r\n    );\r\n\r\n    return {\r\n        browserHistory,\r\n        store,\r\n        actionHandlers: {},\r\n        *errorHandler() {},\r\n    };\r\n}\r\n"]}